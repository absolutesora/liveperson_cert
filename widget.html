<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Page</title>
</head>
<body>

    <h1>Hello World</h1>

    <div id="chat"></div>
    

    <script type="text/javascript">
    lpTag.agentSDK.init()

    var chat = document.getElementById("chat");
    var info = "chatTranscript.lines";

    // var getData = function(data){
    //     console.log("success");
    //     var lastItem = data[data.length -1];
    //     console.log(lastItem.text);
    //     chat.innerText = lastItem.text;
    // }

    var updateCallback = function(data){
        console.log("success", data);
        var latest = data.newValue[0];
        console.log(lastest.text);
        chat.innerText = lastest.text;
    };

    var onError = function(err){
        if(!err){
            console.log("successfully bind to conversation");
        }
    };

    lpTag.agentSDK.bind(info, updateCallback, onError);

    </script>

</body>
</html>